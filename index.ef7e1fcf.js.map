{"mappings":"AAAO,MAGMA,EAAyB,CACpCC,IAHqB,YAIrBC,SAAU,KACVC,WAAY,QACZC,YAAa,aACbC,WAAY,QCNCC,eAAAC,GAA2BC,EAAEA,EAAI,GAAEC,KAAEA,EAAO,MACzD,IACE,MAAMC,EAAc,IAAIC,gBAAgB,IACnCX,E,KACHS,E,EACAD,IAGII,QAAiBC,MAAM,2BAAeH,KAC5C,IAAKE,EAASE,GACZ,OAAwB,MAApBF,EAASG,OACJ,GAEF,CAAEC,MAAOJ,EAASG,QAG3B,MAAQE,KAAMC,SAAiBN,EAASO,OAExC,OAAOD,C,CACP,MAAOE,GACP,MAAO,CAAEJ,MAAOI,EAAEC,W,ECpBtB,MAAMC,EAAkBC,IACtB,MAAMC,EAAMC,SAASC,cAAc,OAGnC,OAFAF,EAAIG,UAAUC,IAAI,SAClBJ,EAAIK,IAAMN,EAAMO,aACTN,CAAG,EAaLlB,eAAeyB,GAAWvB,EAAEA,EAACC,KAAEA,IACpC,MAAMS,QAAeX,EAAY,C,EAAEC,E,KAAGC,IAClCS,EAAOF,MACTgB,MAAMd,EAAOF,OAbjB,UAAoBE,OAAEA,EAAMT,KAAEA,IAC5B,MAAMwB,EAAiBR,SAASS,cAAc,WACjC,MAATzB,IACFwB,EAAeE,UAAY,IAG7B,MAAMC,EAAWlB,EAAOmB,IAAIf,GAC5BW,EAAeK,UAAUF,E,CASzBG,CAAW,C,OAAErB,E,KAAQT,G,CCvBvB,MAAM+B,EAAaf,SAASS,cAAc,qBAE1CM,EAAWC,iBAAiB,UCFrBnC,eAA+Bc,GACpCA,EAAEsB,iBAEFtB,EAAEuB,OAAOlC,KAAKmC,MAAQ,IACtB,MAAMpC,EAAIY,EAAEuB,OAAOnC,EAAEoC,YAEfb,EAAW,C,EAAEvB,EAAGC,KAAM,K,IDH9B+B,EAAWK,cAAc,IAAIC,MAAM,WAEnCC,OAAON,iBAAiB,UCIjBnC,iBACL,MAAM0C,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBzB,SAAS0B,gBAC3D,GAAIH,EAAYE,GAAgBD,EAAc,CAC5C,MAAMG,EAAa3B,SAASS,cAAc,qBACpCzB,EAAO4C,SAASD,EAAW3C,KAAKmC,OACtCQ,EAAW3C,KAAKmC,MAAQnC,EAAO,QACzBsB,EAAW,CAAEvB,EAAG4C,EAAW5C,EAAEoC,MAAOnC,KAAM2C,EAAW3C,KAAKmC,O","sources":["src/script/config.js","src/script/pixabay.js","src/script/ui.js","src/script/main.js","src/script/handlers.js"],"sourcesContent":["export const API_PATH = 'https://pixabay.com/api';\nexport const API_KEY = '<API_KEY>';\n\nexport const DEFAULT_PIXABAY_PARAMS = {\n  key: API_KEY,\n  per_page: '20',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};\n","import { API_PATH, DEFAULT_PIXABAY_PARAMS } from './config.js';\n\nexport default async function pingPixabay({ q = '', page = '1' }) {\n  try {\n    const querystring = new URLSearchParams({\n      ...DEFAULT_PIXABAY_PARAMS,\n      page,\n      q,\n    });\n\n    const response = await fetch(`${API_PATH}?${querystring}`);\n    if (!response.ok) {\n      if (response.status === 400) {\n        return [];\n      }\n      return { error: response.status };\n    }\n\n    const { hits: photos } = await response.json();\n\n    return photos;\n  } catch (e) {\n    return { error: e.toString() };\n  }\n}\n","import pingPixabay from './pixabay.js';\n\nconst getPhotoElement = photo => {\n  const img = document.createElement('img');\n  img.classList.add('photo');\n  img.src = photo.webformatURL;\n  return img;\n};\n\nfunction drawPhotos({ photos, page }) {\n  const photoContainer = document.querySelector('#photos');\n  if (page === '1') {\n    photoContainer.innerHTML = '';\n  }\n\n  const children = photos.map(getPhotoElement);\n  photoContainer.append(...children);\n}\n\nexport async function loadPhotos({ q, page }) {\n  const photos = await pingPixabay({ q, page });\n  if (photos.error) {\n    alert(photos.error);\n    return;\n  }\n  drawPhotos({ photos, page });\n  return;\n}\n","import { searchForPhotos, scrollHandler } from './handlers.js';\n\nconst searchForm = document.querySelector('#searchPhotosForm');\n\nsearchForm.addEventListener('submit', searchForPhotos);\nsearchForm.dispatchEvent(new Event('submit'));\n\nwindow.addEventListener('scroll', scrollHandler);\n","import { loadPhotos } from './ui.js';\n\nexport async function searchForPhotos(e) {\n  e.preventDefault();\n\n  e.target.page.value = '1';\n  const q = e.target.q.value;\n\n  await loadPhotos({ q, page: '1' });\n}\n\nexport async function scrollHandler() {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  if (scrollTop + clientHeight >= scrollHeight) {\n    const searchForm = document.querySelector('#searchPhotosForm');\n    const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\n    await loadPhotos({ q: searchForm.q.value, page: searchForm.page.value });\n  }\n}\n"],"names":["$d0c6e22ac7f31b51$export$e5af7a009e6ed2bd","key","per_page","image_type","orientation","safesearch","async","$93267de7c6c5eabd$export$2e2bcd8739ae039","q","page","querystring","URLSearchParams","response","fetch","ok","status","error","hits","photos","json","e","toString","$da383814f6a2eb89$var$getPhotoElement","photo","img","document","createElement","classList","add","src","webformatURL","$da383814f6a2eb89$export$345071c5d7c214f4","alert","photoContainer","querySelector","innerHTML","children","map","append","$da383814f6a2eb89$var$drawPhotos","$0fe42e19caab7526$var$searchForm","addEventListener","preventDefault","target","value","dispatchEvent","Event","window","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt"],"version":3,"file":"index.ef7e1fcf.js.map"}